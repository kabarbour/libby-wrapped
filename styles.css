/* ───────────────── Libby Brand Theme ───────────────── */
:root{
  /* palette */
  --teal-1:#219a91; --teal-2:#21a69c; --aqua:#44c0b7;
  --amber:#e48625; --indigo:#5157a6;
  --mulled:#57182e; --crimson:#a41d49; --magenta:#c5315f;
  --ink:#e9e8e7; --bg:#121212;

  /* semantic */
  --accent:var(--crimson);
  --accent-2:var(--magenta);
  --accent-3:var(--amber);
  --surface:#171717; --surface-2:#1f1f1f;

  /* fonts */
  --font-body:"SF Pro Text","SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  --font-head:"museo-slab",serif;
}

/* App background + default foreground */
html, body, [data-testid="stAppViewContainer"]{
  background:var(--bg) !important;
  color:var(--ink) !important;
}

/* ───────────── Typography base ───────────── */
body, .stMarkdown, .stText, .stWrite, p, li {
  font-family:var(--font-body);
  font-weight:400;
  font-style:normal;
  color:var(--ink);
}

/* Headings use Museo Slab */
h1, h2, h3, h4,
.stMarkdown h1, .stMarkdown h2, .stMarkdown h3{
  font-family:var(--font-head);
  font-weight:500;
  letter-spacing:-0.01em;
  color:var(--ink);
}

/* ───────────── Slide layout ───────────── */
.slide{
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  min-height:60vh; text-align:center;
  padding:2rem 1rem;
}
.slide.intro{ min-height:80vh; }
.centered{ text-align:center; }

/* Typographic rhythm inside slides */
.slide .stack{ display:flex; flex-direction:column; gap:0.9rem; }
.slide .stack-lg{ gap:1.25rem; }

/* Kicker (h3) — italic, smaller */
.slide h1{
  font-family:var(--font-head);
  font-weight:500; font-style:italic;
  letter-spacing:-0.01em;
  font-size:clamp(18px, 2.2vw, 28px);
  margin:0;
  opacity:0.95;
}

/* Metric (h1) — big headline */
.slide h3{
  font-family:var(--font-head);
  font-weight:300; font-style:normal;
  letter-spacing:-0.01em;
  font-size:clamp(36px, 6vw, 64px);
  line-height:1.1;
  margin:0;
}

/* Body copy + small/meta lines (both SF Pro) */
.slide p{
  margin:0;
  font-family:var(--font-body);
  line-height:1.5;
}
.slide p.small{
  font-size:0.75rem;
  font-style: italic;
  color:rgba(233,232,231,0.75); /* softer ink */
}
.slide .body{
  max-width:60ch;
  font-size:1.05rem;
  margin-inline:auto;
}

/* ───────────── Badge ───────────── */
.badge{
  display:inline-block; padding:6px 14px;
  border-radius:999px;
  background:var(--mulled);
  border:1px solid rgba(87,24,46,0.6);
  color:var(--ink); font-weight:700; font-size:.9rem;
  font-family:var(--font-head);
}

/* ───────────── Buttons ───────────── */
.stButton > button{
  border:none!important; outline:none!important; box-shadow:none!important;
  background:var(--crimson)!important; color:var(--ink)!important;
  border-radius:14px!important;
  font-family:var(--font-body); font-weight:600;
  padding:0.6rem 1.2rem;
  transition:background .2s ease, transform .1s ease;
}
.stButton > button:hover{ background:var(--mulled)!important; transform:translateY(-1px); }
.stButton > button:focus, .stButton > button:active{ box-shadow:none!important; }
.stButton > button[kind="secondary"]{ background:var(--surface-2)!important; color:var(--ink)!important; }

.buttons{
  position:fixed; bottom:40px; left:0; width:100%;
  display:flex; justify-content:center; gap:2rem; z-index:10;
}

/* ───────────── Story chips ───────────── */
a, a:visited{ color:inherit; }
.story-chip-row{ width:520px; margin:6px auto 16px; display:flex; gap:6px; }
.story-chip{
  flex:1 1 0; display:block; height:6px; border-radius:999px;
  background:rgba(255,255,255,0.15); overflow:hidden; text-decoration:none;
}
.story-chip > span{
  display:block; height:100%;
  background:var(--aqua);               /* flat teal fill (no gradient) */
  transition:width 250ms ease;
}

/* Float-in animation */
@keyframes float-in-up {
  from { transform: translateY(16px); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}

/* Base reveal class */
.reveal {
  opacity: 0; /* ensures we don't flash before animation */
  animation: float-in-up 500ms ease-out both;
  animation-delay: var(--delay, 0ms);
  will-change: transform, opacity;
}

/* (Optional) subtle hover lift for cards */
.card:hover {
  transform: translateY(-3px);
  transition: transform 150ms ease;
}


/* ---- Mobile-safe spacing for fixed buttons ---- */
.buttons{
  position:fixed;
  left:0; width:100%;
  bottom: calc(16px + env(safe-area-inset-bottom)); /* respects iOS bottom bar */
  display:flex; justify-content:center; gap:2rem; z-index:10;
  padding-inline: 16px; /* prevent edge clipping on narrow screens */
}

/* Add scrollable space at the end of the page so the fixed buttons
   never cover the last slide on short screens */
.controls-spacer{
  height: 120px; /* desktop default */
}

/* Make story chips width responsive (no hard 520px on phones) */
.story-chip-row{
  width: min(520px, 92vw);
}

/* Slightly smaller slide padding on narrow screens */
@media (max-width: 768px){
  .slide{
    min-height: 56vh;
    padding: 1.25rem 0.75rem;
  }

  /* tighter button gap, bigger tap targets */
  .buttons{
    gap: 0.75rem;
  }

  .stButton > button{
    padding: 0.9rem 1rem;          /* larger thumb-friendly target */
    font-size: 1rem;
    border-radius: 12px!important;
  }

  /* extra bottom spacer for very short viewports */
  .controls-spacer{
    height: 160px;
  }
}

/* Super small phones: stack the buttons vertically so nothing clips */
@media (max-width: 420px){
  .buttons{
    flex-direction: column;
    align-items: stretch;
    bottom: calc(10px + env(safe-area-inset-bottom));
    padding-inline: 12px;
  }
  .controls-spacer{ height: 180px; }
}

/* Respect notches/home indicators on iOS safely everywhere */
html, body, [data-testid="stAppViewContainer"]{
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Make the chip tap area a bit taller on mobile without looking chunky */
@media (max-width: 768px){
  .story-chip{ height: 8px; }
}
